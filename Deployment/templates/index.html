<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Waste Management</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        :root {
            --primary-color: #2ecc71;
            --secondary-color: #27ae60;
            --accent-color: #34495e;
            --text-color: #2c3e50;
            --light-bg: #ecf0f1;
            --dark-bg: #2c3e50;
            --gradient-primary: linear-gradient(135deg, #2ecc71, #27ae60);
            --gradient-secondary: linear-gradient(135deg, #3498db, #2980b9);
            --gradient-accent: linear-gradient(135deg, #34495e, #2c3e50);
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: var(--light-bg);
            color: var(--text-color);
            min-height: 100vh;
            background-image: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        /* Navbar */
        .navbar {
            background: rgba(44, 62, 80, 0.95);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            box-shadow: var(--shadow-lg);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border-bottom: 2px solid rgba(46, 204, 113, 0.3);
        }

        .navbar .logo {
            font-size: 24px;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .navbar .logo i {
            font-size: 28px;
            color: var(--primary-color);
        }

        .navbar ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            gap: 20px;
        }

        .navbar ul li a {
            color: white;
            font-weight: 500;
            transition: all 0.3s;
            padding: 8px 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            position: relative;
            overflow: hidden;
        }

        .navbar ul li a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s;
        }

        .navbar ul li a:hover::before {
            width: 100%;
        }

        .navbar ul li a:hover {
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        /* Header */
        .header {
            background: var(--gradient-primary);
            padding: 120px 20px 80px;
            color: white;
            text-align: center;
            margin-top: 60px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="rgba(255,255,255,0.1)" d="M0 0h100v100H0z"/></svg>');
            opacity: 0.1;
        }

        .header h1 {
            font-size: 48px;
            margin: 0;
            animation: fadeIn 2s ease-in-out;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .header p {
            font-size: 18px;
            margin: 10px 0 0;
            animation: fadeIn 3s ease-in-out;
        }

        /* Container */
        .container {
            margin: 30px auto;
            width: 90%;
            max-width: 1200px;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            animation: slideUp 1s ease-in-out;
        }

        /* Cards */
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .card-title {
            color: var(--accent-color);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            font-size: 24px;
            color: var(--primary-color);
        }

        /* Progress Bars */
        .progress {
            height: 20px;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.1);
            margin: 10px 0;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .progress-bar {
            border-radius: 10px;
            transition: width 1s ease-in-out;
            background: var(--gradient-primary);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.3s;
        }

        .btn:hover::before {
            transform: translateX(0);
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        /* Forms */
        .form-control {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ddd;
            transition: all 0.3s;
        }

        .form-control:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(26, 188, 156, 0.25);
        }

        /* Media Elements */
        .media-container {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        video,
        canvas,
        img {
            width: 100%;
            border-radius: 15px;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Page Transitions */
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .page.active {
            display: block;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                padding: 10px;
            }

            .navbar ul {
                margin-top: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

            .header {
                padding: 100px 20px 60px;
            }

            .header h1 {
                font-size: 36px;
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        /* Contact Section Styles */
        .contact-wrapper {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .text-gradient {
            background: linear-gradient(45deg, #2ecc71, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Contact Info Card */
        .contact-info-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            height: 100%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .contact-info-card:hover {
            transform: translateY(-5px);
        }

        .card-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .card-icon i {
            font-size: 24px;
            color: white;
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .info-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .info-item i {
            font-size: 20px;
            color: #2ecc71;
            margin-right: 1rem;
            margin-top: 0.25rem;
        }

        .info-item h4 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
            color: #2c3e50;
        }

        .info-item p {
            margin: 0;
            color: #6c757d;
        }

        /* Social Links */
        .social-links {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #e9ecef;
        }

        .social-icons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-icon.facebook { background: #3b5998; }
        .social-icon.twitter { background: #1da1f2; }
        .social-icon.instagram { background: #e1306c; }
        .social-icon.linkedin { background: #0077b5; }

        .social-icon:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Contact Form Card */
        .contact-form-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            height: 100%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .form-floating {
            margin-bottom: 1rem;
        }

        .form-control {
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: #2ecc71;
            box-shadow: 0 0 0 0.2rem rgba(46, 204, 113, 0.25);
        }

        .btn-primary {
            background: linear-gradient(45deg, #2ecc71, #27ae60);
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .contact-wrapper {
                padding: 1.5rem;
            }

            .contact-info-card,
            .contact-form-card {
                margin-bottom: 1.5rem;
            }
        }
    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo">
            <i class="fas fa-recycle"></i>
            Smart Waste
        </div>
        <ul>
            <li><a href="#" onclick="showPage('home')"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="#" onclick="showPage('about')"><i class="fas fa-info-circle"></i> About</a></li>
            <li><a href="#" onclick="showPage('bin-status')"><i class="fas fa-chart-bar"></i> Bin Status</a></li>
            <li><a href="#" onclick="showPage('contact')"><i class="fas fa-envelope"></i> Contact</a></li>
        </ul>
    </nav>

    <!-- Home Page -->
    <div id="home" class="page active">
        <header class="header">
            <h1>üå± Smart Waste Management System üóëÔ∏è</h1>
            <p>Upload or capture an image to classify waste automatically</p>
        </header>

        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title">Upload or Capture Image</h3>
                            <form id="uploadForm" class="mb-3">
                                <div class="mb-3">
                                    <label for="fileInput" class="form-label">Upload Image</label>
                                    <input type="file" class="form-control" id="fileInput"
                                        onchange="previewImage(event)">
                                </div>
                </form>

                            <form id="urlForm" class="mb-3">
                                <div class="mb-3">
                                    <label for="imageUrl" class="form-label">Or Enter Image URL</label>
                                    <input type="text" class="form-control" id="imageUrl" placeholder="Enter image URL">
                                </div>
                </form>

                            <div class="mb-3">
                                <button class="btn btn-primary" onclick="startCamera()">
                                    <i class="fas fa-camera"></i> Turn On Camera
                                </button>
                                <button class="btn btn-primary" onclick="captureImage()">
                                    <i class="fas fa-camera-retro"></i> Capture
                                </button>
                            </div>

                            <div class="media-container mb-3">
                    <video id="camera" autoplay style="display:none;"></video>
                    <canvas id="canvas" style="display:none;"></canvas>
                                <img id="capturedImage" style="display:none;">
                </div>

                            <button class="btn btn-primary" onclick="predictImage()">
                                <i class="fas fa-search"></i> Predict Waste Type
                            </button>
                            <h3 id="result" class="mt-3"></h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <h3 class="card-title">System Features</h3>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <i class="fas fa-check-circle text-success"></i>
                                    Automatic waste classification
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-check-circle text-success"></i>
                                    Real-time bin status monitoring
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-check-circle text-success"></i>
                                    Smart bin management
                                </li>
                                <li class="list-group-item">
                                    <i class="fas fa-check-circle text-success"></i>
                                    Environmental impact tracking
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bin Status Section -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card" style="background: linear-gradient(135deg, #34495e, #2c3e50); color: white;">
                        <div class="card-body">
                            <h3 class="text-center mb-4">
                                <i class="fas fa-chart-line" style="color: #f1c40f;"></i>
                                Current Bin Status
                            </h3>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="card mb-4"
                                        style="background: linear-gradient(135deg, #2ecc71, #27ae60); color: white;">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-leaf" style="color: #f1c40f;"></i>
                                                Biodegradable Bin
                                            </h5>
                                            <div class="progress" style="background: rgba(255,255,255,0.2);">
                                                <div class="progress-bar" role="progressbar" id="bio-progress-home"
                                                    style="width: 0%; background: #f1c40f;"></div>
                                            </div>
                                            <p class="mt-2">Current Level: <span id="bio-level-home"
                                                    style="color: #f1c40f;">0%</span></p>
                                            <p class="status-text" id="bio-status-home">Loading...</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card mb-4"
                                        style="background: linear-gradient(135deg, #e74c3c, #c0392b); color: white;">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-trash" style="color: #f1c40f;"></i>
                                                Non-Biodegradable Bin
                                            </h5>
                                            <div class="progress" style="background: rgba(255,255,255,0.2);">
                                                <div class="progress-bar" role="progressbar" id="non-bio-progress-home"
                                                    style="width: 0%; background: #f1c40f;"></div>
                                            </div>
                                            <p class="mt-2">Current Level: <span id="non-bio-level-home"
                                                    style="color: #f1c40f;">0%</span></p>
                                            <p class="status-text" id="non-bio-status-home">Loading...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <a href="#" onclick="showPage('bin-status')" class="btn btn-warning">
                                    <i class="fas fa-chart-bar"></i> View Detailed Status
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Page -->
    <div id="about" class="page">
        <div class="container">
            <div class="card">
                <div class="card-body">
                    <h2 class="text-center mb-4">About Our System</h2>
                    <p class="lead text-center">
                        Welcome to our Smart Waste Management System! We are dedicated to making the world a cleaner and
                        greener place by
                        helping you classify waste efficiently.
            </p>
        </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h3 class="text-center mb-4">How It Works</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h5 class="card-title">Biodegradable Waste</h5>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <i class="fas fa-leaf text-success"></i>
                                            Paper
                                        </li>
                                        <li class="list-group-item">
                                            <i class="fas fa-leaf text-success"></i>
                                            Cardboard
                                        </li>
                                        <li class="list-group-item">
                                            <i class="fas fa-leaf text-success"></i>
                                            Food Waste
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <h5 class="card-title">Non-Biodegradable Waste</h5>
                                    <ul class="list-group list-group-flush">
                                        <li class="list-group-item">
                                            <i class="fas fa-trash text-danger"></i>
                                            Plastic
                                        </li>
                                        <li class="list-group-item">
                                            <i class="fas fa-trash text-danger"></i>
                                            Glass
                                        </li>
                                        <li class="list-group-item">
                                            <i class="fas fa-trash text-danger"></i>
                                            Metal
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bin Status Page -->
    <div id="bin-status" class="page">
        <div class="container">
            <div class="card">
                <div class="card-body">
                    <h2 class="text-center mb-4">Bin Status & Location</h2>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="fas fa-leaf text-success"></i>
                                        Biodegradable Bin
                                    </h5>
                                    <div class="progress">
                                        <div class="progress-bar bg-success" role="progressbar" id="bio-progress"
                                            style="width: 0%"></div>
                                    </div>
                                    <p class="mt-2">Current Level: <span id="bio-level">0%</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="fas fa-trash text-danger"></i>
                                        Non-Biodegradable Bin
                                    </h5>
                                    <div class="progress">
                                        <div class="progress-bar bg-danger" role="progressbar" id="non-bio-progress"
                                            style="width: 0%"></div>
                                    </div>
                                    <p class="mt-2">Current Level: <span id="non-bio-level">0%</span></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <i class="fas fa-map-marker-alt"></i>
                                        Bin Location
                                    </h5>
                                    <div id="map" style="height: 400px; border-radius: 10px; margin-bottom: 15px;">
        </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h6>Current Location</h6>
                                                    <p id="current-location">Loading...</p>
                                                    <button class="btn btn-primary" onclick="getCurrentLocation()">
                                                        <i class="fas fa-location-arrow"></i> Get Current Location
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card">
                                                <div class="card-body">
                                                    <h6>Bin Location</h6>
                                                    <p id="bin-location">Loading...</p>
                                                    <a id="navigation-link" href="#" target="_blank"
                                                        class="btn btn-primary">
                                                        <i class="fas fa-directions"></i> Navigate to Bin
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Page -->
    <div id="contact" class="page">
        <div class="container my-5 pt-5">
            <div class="contact-wrapper">
                <div class="contact-header text-center mb-5">
                    <h2 class="display-4 fw-bold text-gradient">Get in Touch</h2>
                    <p class="lead text-muted">Have questions? We'd love to hear from you.</p>
                </div>

                <div class="row g-4">
                    <!-- Contact Information Card -->
                    <div class="col-lg-4">
                        <div class="contact-info-card">
                            <div class="card-icon">
                                <i class="fas fa-map-marker-alt"></i>
                            </div>
                            <h3>Our Location</h3>
                            <div class="info-item">
                                <i class="fas fa-building"></i>
                                <div>
                                    <h4>Smart Waste Management</h4>
                                    <p>54, S.G alya, Bengaluru</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-envelope"></i>
                                <div>
                                    <h4>Email Us</h4>
                                    <p>shakthivel13@gmail.com</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <i class="fas fa-phone"></i>
                                <div>
                                    <h4>Call Us</h4>
                                    <p>+91 7868929771</p>
                                </div>
                            </div>
                            <div class="social-links">
                                <h4>Follow Us</h4>
                                <div class="social-icons">
                                    <a href="#" class="social-icon facebook">
                                        <i class="fab fa-facebook-f"></i>
                                    </a>
                                    <a href="#" class="social-icon twitter">
                                        <i class="fab fa-twitter"></i>
                                    </a>
                                    <a href="#" class="social-icon instagram">
                                        <i class="fab fa-instagram"></i>
                                    </a>
                                    <a href="#" class="social-icon linkedin">
                                        <i class="fab fa-linkedin-in"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Form Card -->
                    <div class="col-lg-8">
                        <div class="contact-form-card">
                            <form class="contact-form">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="name" placeholder="Your Name" required>
                                            <label for="name">Your Name</label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-floating">
                                            <input type="email" class="form-control" id="email" placeholder="Your Email" required>
                                            <label for="email">Your Email</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="subject" placeholder="Subject" required>
                                            <label for="subject">Subject</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="form-floating">
                                            <textarea class="form-control" id="message" placeholder="Your Message" style="height: 150px" required></textarea>
                                            <label for="message">Your Message</label>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <button type="submit" class="btn btn-primary btn-lg w-100">
                                            <i class="fas fa-paper-plane me-2"></i>Send Message
                                        </button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            databaseURL: "https://smart-waste-s1257-default-rtdb.firebaseio.com/"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Listen for real-time updates
        function startRealTimeUpdates() {
            console.log('Starting Firebase real-time updates');

            // Listen to BiodegradableBin level changes
            database.ref('BiodegradableBin/Level').on('value', (snapshot) => {
                const bioLevel = snapshot.val() || 0;
                console.log('Bio level update:', bioLevel);

                // Update both home and status page indicators
                const bioProgressBar = document.getElementById('bio-progress');
                const bioLevelText = document.getElementById('bio-level');
                if (bioProgressBar && bioLevelText) {
                    updateBinIndicator(bioProgressBar, bioLevelText, bioLevel);
                }

                const bioProgressHome = document.getElementById('bio-progress-home');
                const bioLevelHome = document.getElementById('bio-level-home');
                const bioStatusHome = document.getElementById('bio-status-home');
                if (bioProgressHome && bioLevelHome) {
                    updateBinIndicator(bioProgressHome, bioLevelHome, bioLevel, bioStatusHome);
                }
            });

            // Listen to NonBiodegradableBin level changes
            database.ref('NonBiodegradableBin/Level').on('value', (snapshot) => {
                const nonBioLevel = snapshot.val() || 0;
                console.log('Non-bio level update:', nonBioLevel);

                // Update both home and status page indicators
                const nonBioProgressBar = document.getElementById('non-bio-progress');
                const nonBioLevelText = document.getElementById('non-bio-level');
                if (nonBioProgressBar && nonBioLevelText) {
                    updateBinIndicator(nonBioProgressBar, nonBioLevelText, nonBioLevel);
                }

                const nonBioProgressHome = document.getElementById('non-bio-progress-home');
                const nonBioLevelHome = document.getElementById('non-bio-level-home');
                const nonBioStatusHome = document.getElementById('non-bio-status-home');
                if (nonBioProgressHome && nonBioLevelHome) {
                    updateBinIndicator(nonBioProgressHome, nonBioLevelHome, nonBioLevel, nonBioStatusHome);
                }
            });

            // Listen to bin status changes
            database.ref('garbage_bin').on('value', (snapshot) => {
                const binStatus = snapshot.val() || {};
                console.log('Bin status update:', binStatus);

                // Update additional status indicators if needed
                if (binStatus.lid_status === "open") {
                    showNotification('Bin lid is open');
                }
            });
        }

        function stopRealTimeUpdates() {
            console.log('Stopping Firebase real-time updates');
            // Remove all Firebase listeners
            database.ref('BiodegradableBin/Level').off();
            database.ref('NonBiodegradableBin/Level').off();
            database.ref('garbage_bin').off();
        }

        function showNotification(message) {
            const notificationDiv = document.createElement('div');
            notificationDiv.className = 'alert alert-info alert-dismissible fade show position-fixed top-0 end-0 m-3';
            notificationDiv.innerHTML = `
                <i class="fas fa-info-circle"></i> ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            `;
            document.body.appendChild(notificationDiv);
            setTimeout(() => notificationDiv.remove(), 3000);
        }

        // Start updates when page loads if on relevant pages
        document.addEventListener('DOMContentLoaded', () => {
            const activePage = document.querySelector('.page.active');
            if (activePage && (activePage.id === 'bin-status' || activePage.id === 'home')) {
                startRealTimeUpdates();
            }
        });

        // Update showPage function to handle Firebase listeners
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');

            if (pageId === 'bin-status' || pageId === 'home') {
                startRealTimeUpdates();
                if (pageId === 'bin-status' && !map) {
                    initMap();
                }
            } else {
                stopRealTimeUpdates();
            }
        }

        // Handle page visibility changes
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                stopRealTimeUpdates();
            } else {
                const activePage = document.querySelector('.page.active');
                if (activePage && (activePage.id === 'bin-status' || activePage.id === 'home')) {
                    startRealTimeUpdates();
                }
            }
        });

        // Camera and Prediction Logic
        let capturedBlob = null;
        let stream = null;

        function startCamera() {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (cameraStream) {
                    stream = cameraStream;
                    document.getElementById("camera").style.display = "block";
                    document.getElementById("camera").srcObject = cameraStream;
                })
                .catch(function (error) {
                    console.error("Error accessing camera:", error);
                    alert("Error accessing camera. Please make sure you have granted camera permissions.");
                });
        }

        function captureImage() {
            var video = document.getElementById("camera");
            var canvas = document.getElementById("canvas");
            var context = canvas.getContext("2d");

            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);

            canvas.toBlob(function (blob) {
                capturedBlob = blob;
                document.getElementById("capturedImage").src = URL.createObjectURL(blob);
                document.getElementById("capturedImage").style.display = "block";
                stopCamera();
                alert("Image Captured! Click Predict to analyze.");
            }, "image/jpeg");
        }

        function stopCamera() {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
                document.getElementById("camera").style.display = "none";
            }
        }

        function previewImage(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    document.getElementById("capturedImage").src = e.target.result;
                    document.getElementById("capturedImage").style.display = "block";
                };
                reader.readAsDataURL(file);
            }
        }

        function predictImage() {
            var fileInput = document.getElementById("fileInput").files[0];
            var imgUrl = $("#imageUrl").val();
            var formData = new FormData();

            if (fileInput) {
                formData.append("file", fileInput);
            } else if (capturedBlob) {
                formData.append("file", capturedBlob, "capture.jpg");
            } else if (imgUrl) {
                $.post("/predict", JSON.stringify({ url: imgUrl }), function (response) {
                    $("#result").html(`
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i>
                            The waste is classified as <b>${response.waste_type}</b>
                        </div>
                    `);
                }, "json").fail(function (error) {
                    $("#result").html(`
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-circle"></i>
                            Error: ${error.responseJSON.error}
                        </div>
                    `);
                });
                return;
            } else {
                $("#result").html(`
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        Please upload, enter a URL, or capture an image first.
                    </div>
                `);
                return;
            }

            $.ajax({
                type: "POST",
                url: "/predict",
                data: formData,
                processData: false,
                contentType: false,
                success: function (response) {
                    $("#result").html(`
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i>
                            The waste is classified as <b>${response.waste_type}</b>
                        </div>
                    `);
                },
                error: function (error) {
                    $("#result").html(`
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-circle"></i>
                            Error: ${error.responseJSON.error}
                        </div>
                    `);
                }
            });
        }

        // Contact Form Submission
        document.querySelector('.contact-form').addEventListener('submit', function (e) {
            e.preventDefault();
            alert('Thank you for your message! We will get back to you soon.');
            this.reset();
        });

        // Helper function to get status message based on level
        function getBinStatus(level) {
            if (level >= 80) {
                return 'Bin needs immediate attention!';
            } else if (level >= 50) {
                return 'Bin is filling up';
            } else {
                return 'Bin level is normal';
            }
        }

        // Function to update bin status with visual feedback
        function updateBinStatus() {
            fetch('/api/bin-level')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Received bin data:', data); // Debug log

                    // Update biodegradable bin
                    const bioLevelValue = data.biodegradable_level || 0;

                    // Update on bin status page
                    const bioProgressBar = document.getElementById('bio-progress');
                    const bioLevelText = document.getElementById('bio-level');
                    if (bioProgressBar && bioLevelText) {
                        updateBinIndicator(bioProgressBar, bioLevelText, bioLevelValue);
                    }

                    // Update on home page
                    const bioProgressHome = document.getElementById('bio-progress-home');
                    const bioLevelHome = document.getElementById('bio-level-home');
                    const bioStatusHome = document.getElementById('bio-status-home');
                    if (bioProgressHome && bioLevelHome) {
                        updateBinIndicator(bioProgressHome, bioLevelHome, bioLevelValue, bioStatusHome);
                    }

                    // Update non-biodegradable bin
                    const nonBioLevelValue = data.non_biodegradable_level || 0;

                    // Update on bin status page
                    const nonBioProgressBar = document.getElementById('non-bio-progress');
                    const nonBioLevelText = document.getElementById('non-bio-level');
                    if (nonBioProgressBar && nonBioLevelText) {
                        updateBinIndicator(nonBioProgressBar, nonBioLevelText, nonBioLevelValue);
                    }

                    // Update on home page
                    const nonBioProgressHome = document.getElementById('non-bio-progress-home');
                    const nonBioLevelHome = document.getElementById('non-bio-level-home');
                    const nonBioStatusHome = document.getElementById('non-bio-status-home');
                    if (nonBioProgressHome && nonBioLevelHome) {
                        updateBinIndicator(nonBioProgressHome, nonBioLevelHome, nonBioLevelValue, nonBioStatusHome);
                    }
                })
                .catch(error => {
                    console.error('Error fetching bin status:', error);
                    showError('Error updating bin status. Retrying...');
                });
        }

        // Function to update bin display with animations
        function updateBinIndicator(progressBar, levelText, level, statusText = null) {
            // Update progress bar
            progressBar.style.width = level + '%';
            levelText.textContent = level + '%';

            // Update colors and animations based on level
            if (level >= 80) {
                progressBar.style.backgroundColor = '#e74c3c'; // Red
                progressBar.style.animation = 'pulse 2s infinite';
            } else if (level >= 50) {
                progressBar.style.backgroundColor = '#f1c40f'; // Yellow
                progressBar.style.animation = 'none';
            } else {
                progressBar.style.backgroundColor = '#2ecc71'; // Green
                progressBar.style.animation = 'none';
            }

            // Update status message if element exists
            if (statusText) {
                if (level >= 80) {
                    statusText.textContent = 'Bin needs immediate attention!';
                    statusText.style.color = '#e74c3c';
                } else if (level >= 50) {
                    statusText.textContent = 'Bin is filling up';
                    statusText.style.color = '#f1c40f';
                } else {
                    statusText.textContent = 'Bin level is normal';
                    statusText.style.color = '#2ecc71';
                }
            }
        }

        // Function to show error message
        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'alert alert-danger alert-dismissible fade show position-fixed top-0 end-0 m-3';
            errorDiv.innerHTML = `
                <strong><i class="fas fa-exclamation-circle"></i> Error:</strong> ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            `;
            document.body.appendChild(errorDiv);
            setTimeout(() => errorDiv.remove(), 5000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { opacity: 1; }
                50% { opacity: 0.5; }
                100% { opacity: 1; }
            }
            @keyframes fadeInOut {
                0% { opacity: 1; }
                50% { opacity: 0; }
                100% { opacity: 1; }
            }
            .progress-bar {
                transition: width 0.5s ease-in-out, background-color 0.5s ease-in-out;
            }
        `;
        document.head.appendChild(style);

        // Initialize real-time updates
        let updateInterval;

        function startRealTimeUpdates() {
            console.log('Starting real-time updates'); // Debug log
            updateBinStatus(); // Initial update
            // Clear any existing interval
            if (updateInterval) {
                clearInterval(updateInterval);
            }
            // Set new interval for updates every 1 second
            updateInterval = setInterval(updateBinStatus, 1000);
        }

        function stopRealTimeUpdates() {
            console.log('Stopping real-time updates'); // Debug log
            if (updateInterval) {
                clearInterval(updateInterval);
                updateInterval = null;
            }
        }

        // Update the showPage function to handle real-time updates
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');

            // Start real-time updates for bin status pages
            if (pageId === 'bin-status' || pageId === 'home') {
                startRealTimeUpdates();
                if (pageId === 'bin-status' && !map) {
                    initMap();
                }
            } else {
                stopRealTimeUpdates();
            }
        }

        // Start real-time updates when the page loads if we're on the home page
        if (document.getElementById('home').classList.contains('active')) {
            startRealTimeUpdates();
        }

        // Handle page visibility changes
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                stopRealTimeUpdates();
            } else {
                const activePage = document.querySelector('.page.active');
                if (activePage && (activePage.id === 'bin-status' || activePage.id === 'home')) {
                    startRealTimeUpdates();
                }
            }
        });

        // Bin Status and Location Functions
        let map;
        let currentMarker;
        let binMarker;
        let currentLocation = null;
        let binLocation = null;

        function initMap() {
            // Initialize map centered at a default location
            map = L.map('map').setView([12.9716, 77.5946], 13);

            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);

            // Get bin location from server
            fetch('/api/bin-location')
                .then(response => response.json())
                .then(data => {
                    binLocation = data;
                    updateBinLocation();
                })
                .catch(error => console.error('Error fetching bin location:', error));
        }

        function updateBinLocation() {
            if (binLocation) {
                // Remove existing bin marker if it exists
                if (binMarker) {
                    map.removeLayer(binMarker);
                }

                // Add new bin marker
                binMarker = L.marker([binLocation.latitude, binLocation.longitude])
                    .addTo(map)
                    .bindPopup('Smart Waste Bin')
                    .openPopup();

                // Update bin location text
                document.getElementById('bin-location').textContent =
                    `Latitude: ${binLocation.latitude}, Longitude: ${binLocation.longitude}`;

                // Update navigation link
                if (currentLocation) {
                    updateNavigationLink();
                }
            }
        }

        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    position => {
                        currentLocation = {
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude
                        };

                        // Remove existing current location marker if it exists
                        if (currentMarker) {
                            map.removeLayer(currentMarker);
                        }

                        // Add new current location marker
                        currentMarker = L.marker([currentLocation.latitude, currentLocation.longitude])
                            .addTo(map)
                            .bindPopup('Your Location')
                            .openPopup();

                        // Update current location text
                        document.getElementById('current-location').textContent =
                            `Latitude: ${currentLocation.latitude}, Longitude: ${currentLocation.longitude}`;

                        // Update navigation link if bin location is available
                        if (binLocation) {
                            updateNavigationLink();
                        }

                        // Center map on current location
                        map.setView([currentLocation.latitude, currentLocation.longitude], 15);
                    },
                    error => {
                        console.error('Error getting location:', error);
                        document.getElementById('current-location').textContent =
                            'Error getting location. Please check your browser permissions.';
                    }
                );
            } else {
                document.getElementById('current-location').textContent =
                    'Geolocation is not supported by your browser.';
            }
        }

        function updateNavigationLink() {
            if (currentLocation && binLocation) {
                const navigationUrl = `https://www.google.com/maps/dir/?api=1&origin=${currentLocation.latitude},${currentLocation.longitude}&destination=${binLocation.latitude},${binLocation.longitude}&travelmode=walking`;
                document.getElementById('navigation-link').href = navigationUrl;
            }
        }
    </script>

    <!-- Add Leaflet CSS and JS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</body>

</html>